"use strict";(self.webpackChunkhydro_dev_github_io=self.webpackChunkhydro_dev_github_io||[]).push([[9580],{3972:(e,t,a)=>{a.r(t),a.d(t,{data:()=>n});const n=JSON.parse('{"key":"v-0a853913","path":"/dev/db-layout.html","title":"数据库结构","lang":"en-US","frontmatter":{"description":"document 基础列：(domainId, docId, docType), owner, title, content 存储所有文档，包括题目，比赛，训练等等，使用 docType 字段区分文档类型，docType 的定义可参照 packages/hydrooj/src/model/document.ts 。 document.status 基础...","head":[["meta",{"property":"og:url","content":"https://hydro.js.org/dev/db-layout.html"}],["meta",{"property":"og:site_name","content":"Hydro"}],["meta",{"property":"og:title","content":"数据库结构"}],["meta",{"property":"og:description","content":"document 基础列：(domainId, docId, docType), owner, title, content 存储所有文档，包括题目，比赛，训练等等，使用 docType 字段区分文档类型，docType 的定义可参照 packages/hydrooj/src/model/document.ts 。 document.status 基础..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-02-29T15:46:47.000Z"}],["meta",{"property":"article:modified_time","content":"2024-02-29T15:46:47.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"数据库结构\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-02-29T15:46:47.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"document","slug":"document","link":"#document","children":[]},{"level":2,"title":"document.status","slug":"document-status","link":"#document-status","children":[]},{"level":2,"title":"record","slug":"record","link":"#record","children":[]},{"level":2,"title":"user","slug":"user","link":"#user","children":[]},{"level":2,"title":"oplog","slug":"oplog","link":"#oplog","children":[]},{"level":2,"title":"blacklist","slug":"blacklist","link":"#blacklist","children":[]},{"level":2,"title":"system","slug":"system","link":"#system","children":[]},{"level":2,"title":"task","slug":"task","link":"#task","children":[]},{"level":2,"title":"event","slug":"event","link":"#event","children":[]},{"level":2,"title":"schedule","slug":"schedule","link":"#schedule","children":[]},{"level":2,"title":"opcount","slug":"opcount","link":"#opcount","children":[]},{"level":2,"title":"token","slug":"token","link":"#token","children":[]}],"git":{"createdTime":1709221607000,"updatedTime":1709221607000,"contributors":[{"name":"undefined","email":"i@undefined.moe","commits":1}]},"readingTime":{"minutes":0.7,"words":209},"filePathRelative":"dev/db-layout.md","localizedDate":"February 29, 2024","autoDesc":true,"excerpt":""}')},2471:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var n=a(6252);const o=[(0,n.uE)('<h1 id="数据库结构" tabindex="-1"><a class="header-anchor" href="#数据库结构"><span>数据库结构</span></a></h1><h2 id="document" tabindex="-1"><a class="header-anchor" href="#document"><span>document</span></a></h2><p>基础列：(domainId, docId, docType), owner, title, content 存储所有文档，包括题目，比赛，训练等等，使用 docType 字段区分文档类型，docType 的定义可参照 packages/hydrooj/src/model/document.ts 。</p><h2 id="document-status" tabindex="-1"><a class="header-anchor" href="#document-status"><span>document.status</span></a></h2><p>基础列：(domainId, docId, docType, uid), owner, title, content 存储用户在对应文档下留下的信息，如题目的提交状态，比赛的成绩等等。</p><h2 id="record" tabindex="-1"><a class="header-anchor" href="#record"><span>record</span></a></h2><p>基础列：((_id), domainId), uid, code, lang, score, status 存储用户的提交记录。</p><h2 id="user" tabindex="-1"><a class="header-anchor" href="#user"><span>user</span></a></h2><p>基础列：(_id), uname, unameLower, mail, mailLower, priv 在系统中的所有用户。</p><h2 id="oplog" tabindex="-1"><a class="header-anchor" href="#oplog"><span>oplog</span></a></h2><p>存储系统日志。</p><h2 id="blacklist" tabindex="-1"><a class="header-anchor" href="#blacklist"><span>blacklist</span></a></h2><h2 id="system" tabindex="-1"><a class="header-anchor" href="#system"><span>system</span></a></h2><h2 id="task" tabindex="-1"><a class="header-anchor" href="#task"><span>task</span></a></h2><p>用于提交队列等。</p><h2 id="event" tabindex="-1"><a class="header-anchor" href="#event"><span>event</span></a></h2><p>用于处理 Hydro 的内部事件通讯，请勿手动操作。</p><h2 id="schedule" tabindex="-1"><a class="header-anchor" href="#schedule"><span>schedule</span></a></h2><p>定时任务相关。</p><h2 id="opcount" tabindex="-1"><a class="header-anchor" href="#opcount"><span>opcount</span></a></h2><p>用于记录用户的访问情况，作频率限制用</p><h2 id="token" tabindex="-1"><a class="header-anchor" href="#token"><span>token</span></a></h2><p>存储临时信息，如登陆状态，注册验证码等</p>',23)],d={},s=(0,a(3744).Z)(d,[["render",function(e,t){return(0,n.wg)(),(0,n.iD)("div",null,o)}]])},3744:(e,t)=>{t.Z=(e,t)=>{const a=e.__vccOpts||e;for(const[e,n]of t)a[e]=n;return a}}}]);